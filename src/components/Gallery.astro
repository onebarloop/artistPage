---
import { PICTURES } from '../consts';
import { Image } from '@astrojs/image/components';
import { Icon } from 'astro-icon';

export interface Props {
  gallerypage?: boolean;
}

const { gallerypage } = Astro.props;

const gallery = gallerypage ? PICTURES : PICTURES.slice(-8);
---

<section
  class='flex flex-wrap gap-y-8 md:gap-y-16 gap-x-2 justify-center md:justify-between md:w-4/5 mt-4'
  id='gallery'
>
  {
    gallery.map(({ src, width, height, alt }) => (
      <div class='w-80'>
        <a
          href={src}
          data-pswp-width={width ? width : 1000}
          data-pswp-height={height ? height : 1000}
        >
          {/* <Icon name='eos-icons:bubble-loading' class='relative' /> */}
          <Image
            class='object-cover hover:scale-110 transition ease-in-out delay-100'
            src={src}
            alt={alt ? alt : 'an arty picture'}
            width={width ? width / 4 : 800}
            height={height ? height / 4 : 800}
          />
        </a>
      </div>
    ))
  }
</section>

<script>
  // @ts-ignore
  import PhotoSwipeLightbox from 'photoswipe/lightbox';
  import 'photoswipe/style.css';
  const lightbox = new PhotoSwipeLightbox({
    gallery: '#gallery',
    children: 'a',
    pswpModule: () => import('photoswipe'),
  });
  lightbox.init();
</script>
